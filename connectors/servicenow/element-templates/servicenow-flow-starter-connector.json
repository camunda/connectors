{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "ServiceNow Flow Starter",
  "id": "io.camunda.connectors.ServiceNowFlow.v1",
  "version": 1,
  "description": "Start a flow in ServiceNow",
  "metadata": {
    "keywords": []
  },
  "documentationRef": "https://docs.camunda.io/docs/components/connectors/out-of-the-box-connectors/servicenow/",
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "appliesTo": [
    "bpmn:Task"
  ],
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "sn",
      "label": "ServiceNow"
    },
    {
      "id": "authentication",
      "label": "Authentication"
    },
    {
      "id": "endpoint",
      "label": "HTTP endpoint"
    },
    {
      "id": "timeout",
      "label": "Connection timeout"
    },
    {
      "id": "payload",
      "label": "Payload"
    },
    {
      "id": "output",
      "label": "Output mapping"
    },
    {
      "id": "error",
      "label": "Error handling"
    },
    {
      "id": "retries",
      "label": "Retries"
    }
  ],
  "properties": [
    {
      "value": "io.camunda:http-json:1",
      "binding": {
        "property": "type",
        "type": "zeebe:taskDefinition"
      },
      "type": "Hidden"
    },
    {
      "id": "snInstance",
      "label": "Instance name",
      "optional": false,
      "feel": "optional",
      "group": "sn",
      "binding": {
        "name": "snInstance",
        "type": "zeebe:input"
      },
      "constraints": {
        "notEmpty": true
      },
      "type": "String"
    },
    {
      "id": "restApiTriggerPath",
      "label": "REST API trigger path",
      "optional": false,
      "feel": "optional",
      "group": "sn",
      "binding": {
        "name": "restApiTriggerPath",
        "type": "zeebe:input"
      },
      "constraints" : {
        "notEmpty" : true,
        "pattern" : {
          "value" : "^([/=]).*",
          "message" : "must start with a '/'"
        }
      },
      "type": "String"
    },
    {
      "id": "authentication.type",
      "label": "Type",
      "description": "Choose the authentication type. Select 'None' if no authentication is necessary",
      "value": "basic",
      "group": "authentication",
      "binding": {
        "name": "authentication.type",
        "type": "zeebe:input"
      },
      "type": "Hidden",
      "choices": [
        {
          "name": "API key",
          "value": "apiKey"
        },
        {
          "name": "Basic",
          "value": "basic"
        },
        {
          "name": "Bearer token",
          "value": "bearer"
        },
        {
          "name": "None",
          "value": "noAuth"
        },
        {
          "name": "OAuth 2.0",
          "value": "oauth-client-credentials-flow"
        }
      ]
    },
    {
      "id": "authentication.apiKeyLocation",
      "label": "Api key location",
      "description": "Choose type: Send API key in header or as query parameter.",
      "optional": false,
      "value": "headers",
      "constraints": {
        "notEmpty": true
      },
      "group": "authentication",
      "binding": {
        "name": "authentication.apiKeyLocation",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "apiKey",
        "type": "simple"
      },
      "type": "Dropdown",
      "choices": [
        {
          "name": "Headers",
          "value": "headers"
        },
        {
          "name": "Query parameters",
          "value": "query"
        }
      ]
    },
    {
      "id": "authentication.name",
      "label": "API key name",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.name",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "apiKey",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.value",
      "label": "API key value",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.value",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "apiKey",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.username",
      "label": "Username",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.username",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "basic",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.password",
      "label": "Password",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.password",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "basic",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.token",
      "label": "Bearer token",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.token",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "bearer",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.oauthTokenEndpoint",
      "label": "OAuth 2.0 token endpoint",
      "description": "The OAuth token endpoint",
      "optional": false,
      "constraints": {
        "notEmpty": true,
        "pattern": {
          "value": "^(=|(http://|https://|secrets|\\{\\{).*$)",
          "message": "Must be a http(s) URL"
        }
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.oauthTokenEndpoint",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "oauth-client-credentials-flow",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.clientId",
      "label": "Client ID",
      "description": "Your application's client ID from the OAuth client",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.clientId",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "oauth-client-credentials-flow",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.clientSecret",
      "label": "Client secret",
      "description": "Your application's client secret from the OAuth client",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.clientSecret",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "oauth-client-credentials-flow",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.audience",
      "label": "Audience",
      "description": "The unique identifier of the target API you want to access",
      "optional": true,
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.audience",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "oauth-client-credentials-flow",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "authentication.clientAuthentication",
      "label": "Client authentication",
      "description": "Send client ID and client secret as Basic Auth request in the header, or as client credentials in the request body",
      "optional": false,
      "constraints": {
        "notEmpty": true
      },
      "group": "authentication",
      "binding": {
        "name": "authentication.clientAuthentication",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "oauth-client-credentials-flow",
        "type": "simple"
      },
      "type": "Dropdown",
      "choices": [
        {
          "name": "Send client credentials in body",
          "value": "credentialsBody"
        },
        {
          "name": "Send as Basic Auth header",
          "value": "basicAuthHeader"
        }
      ]
    },
    {
      "id": "authentication.scopes",
      "label": "Scopes",
      "description": "The scopes which you want to request authorization for (e.g.read:contacts)",
      "optional": true,
      "feel": "optional",
      "group": "authentication",
      "binding": {
        "name": "authentication.scopes",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "authentication.type",
        "equals": "oauth-client-credentials-flow",
        "type": "simple"
      },
      "type": "String"
    },
    {
      "id": "method",
      "label": "Method",
      "optional": false,
      "value": "GET",
      "constraints": {
        "notEmpty": true
      },
      "group": "endpoint",
      "binding": {
        "name": "method",
        "type": "zeebe:input"
      },
      "type": "Hidden",
      "choices": [
        {
          "name": "POST",
          "value": "POST"
        },
        {
          "name": "GET",
          "value": "GET"
        },
        {
          "name": "DELETE",
          "value": "DELETE"
        },
        {
          "name": "PATCH",
          "value": "PATCH"
        },
        {
          "name": "PUT",
          "value": "PUT"
        }
      ]
    },
    {
      "id": "url",
      "label": "URL",
      "optional": false,
      "constraints": {
        "notEmpty": true,
        "pattern": {
          "value": "^(=|(http://|https://|secrets|\\{\\{).*$)",
          "message": "Must be a http(s) URL"
        }
      },
      "group": "endpoint",
      "binding": {
        "name": "url",
        "type": "zeebe:input"
      },
      "type": "Hidden",
      "value": "=\"https://\" + snInstance + \".service-now.com\" + restApiTriggerPath"
    },
    {
      "id": "headers",
      "label": "Headers",
      "description": "Map of HTTP headers to add to the request",
      "optional": true,
      "feel" : "required",
      "group": "sn",
      "binding": {
        "name": "headers",
        "type": "zeebe:input"
      },
      "type" : "String"
    },
    {
      "id": "queryParameters",
      "label": "Query parameters",
      "description": "Map of query parameters to add to the request URL",
      "optional": true,
      "feel" : "required",
      "group": "sn",
      "binding": {
        "name": "queryParameters",
        "type": "zeebe:input"
      },
      "type" : "String"
    },
    {
      "id": "storeResponse",
      "label": "Store response",
      "description": "Store the response as a document in the document store",
      "optional": false,
      "value": "=false",
      "group": "endpoint",
      "binding": {
        "name": "storeResponse",
        "type": "zeebe:input"
      },
      "type": "Hidden"
    },
    {
      "id": "skipEncoding",
      "label": "Skip URL encoding",
      "description": "Skip the default URL decoding and encoding behavior",
      "optional": true,
      "value": false,
      "group": "endpoint",
      "binding": {
        "name": "skipEncoding",
        "type": "zeebe:input"
      },
      "type": "Hidden"
    },
    {
      "id": "connectionTimeoutInSeconds",
      "label": "Connection timeout in seconds",
      "description": "Defines the connection timeout in seconds, or 0 for an infinite timeout",
      "optional": false,
      "value": "=20",
      "constraints": {
        "notEmpty": true,
        "pattern": {
          "value": "^\\d+$",
          "message": "Must be a number"
        }
      },
      "feel": "static",
      "group": "timeout",
      "binding": {
        "name": "connectionTimeoutInSeconds",
        "type": "zeebe:input"
      },
      "type": "Number"
    },
    {
      "id": "readTimeoutInSeconds",
      "label": "Read timeout in seconds",
      "description": "Timeout in seconds to read data from an established connection or 0 for an infinite timeout",
      "optional": false,
      "value": "=20",
      "constraints": {
        "notEmpty": true,
        "pattern": {
          "value": "^\\d+$",
          "message": "Must be a number"
        }
      },
      "feel": "static",
      "group": "timeout",
      "binding": {
        "name": "readTimeoutInSeconds",
        "type": "zeebe:input"
      },
      "type": "Number"
    },
    {
      "id": "body",
      "label": "Request body",
      "description": "Payload to send with the request",
      "optional": true,
      "group": "payload",
      "binding": {
        "name": "body",
        "type": "zeebe:input"
      },
      "type": "Hidden",
      "value": "= { \"flowId\": flowId , \"correlationKey\": correlationKey , \"name\": messageReference , \"ritmId\": snSysId , \"sys_id\": snSysId }"
    },
    {
      "id": "ignoreNullValues",
      "label": "Ignore null values",
      "optional": false,
      "value": "=false",
      "group": "payload",
      "binding": {
        "name": "ignoreNullValues",
        "type": "zeebe:input"
      },
      "tooltip": "Null values will not be sent",
      "type": "Hidden"
    },
    {
      "id": "resultVariable",
      "label": "Result variable",
      "description": "Name of variable to store the response in",
      "group": "output",
      "binding": {
        "key": "resultVariable",
        "type": "zeebe:taskHeader"
      },
      "type": "String",
      "value": "snQueryResult"
    },
    {
      "id": "resultExpression",
      "label": "Result expression",
      "description": "Expression to map the response into process variables",
      "feel": "required",
      "group": "output",
      "binding": {
        "key": "resultExpression",
        "type": "zeebe:taskHeader"
      },
      "type": "Text"
    },
    {
      "id": "errorExpression",
      "label": "Error expression",
      "description": "Expression to handle errors. Details in the <a href=\"https://docs.camunda.io/docs/components/connectors/use-connectors/\" target=\"_blank\">documentation</a>.",
      "feel": "required",
      "group": "error",
      "binding": {
        "key": "errorExpression",
        "type": "zeebe:taskHeader"
      },
      "type": "Text"
    },
    {
      "id": "retryCount",
      "label": "Retries",
      "description": "Number of retries",
      "value": "3",
      "feel": "optional",
      "group": "retries",
      "binding": {
        "property": "retries",
        "type": "zeebe:taskDefinition"
      },
      "type": "String"
    },
    {
      "id": "retryBackoff",
      "label": "Retry backoff",
      "description": "ISO-8601 duration to wait between retries",
      "value": "PT0S",
      "group": "retries",
      "binding": {
        "key": "retryBackoff",
        "type": "zeebe:taskHeader"
      },
      "type": "String"
    }
  ],
  "icon": {
    "contents": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjAxIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiLz4KPHJlY3Qgd2lkdGg9IjUxMC41NjIiIGhlaWdodD0iNTEwLjU2MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43MTg3NSAwLjcxODc1KSIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC4wMSIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjU1LjkwNSA0MjEuNDQyQzE4MS45NTggNDIxLjQ0MiAxMzEuMzM4IDM2NS43MTUgMTMxLjMzOCAyOTYuNzg3QzEzMS4zMzggMjI3LjgyNyAxODEuOTU4IDE3MS4xNjcgMjU1LjkwNSAxNzEuMTY3QzMyOS44OTIgMTcxLjE2NyAzODAuNDcxIDIyNy44MjcgMzgwLjQ3MSAyOTYuNzg3QzM4MC40NzEgMzY1LjcxNSAzMjkuODkyIDQyMS40NDIgMjU1LjkwNSA0MjEuNDQyWk0yNTcuMzYyIDQ2LjAzN0MxMjAuODM4IDQ1LjI0NzMgNy45MjUyOCAxNTcuMDQ5IDYuNzcyMDcgMjk0LjE5M0M2LjE4NTM1IDM2Ni43OSAzNi4zNzExIDQzMi4zMzMgODUuMDI4MyA0NzguNDE5QzEwMi43MzEgNDk1LjE3IDEzMC4wODQgNDk2LjggMTQ5LjI2NCA0ODEuODJDMTc3LjYyOSA0NTkuNjU5IDIxNC4wNDYgNDQ2LjQ1OCAyNTUuOTA1IDQ0Ni40NThDMjk3Ljc2NCA0NDYuNDU4IDMzNC4xODEgNDU5LjY2NyAzNjIuNTQ2IDQ4MS44MkMzODEuOTA4IDQ5Ni45MjYgNDA5LjM2MiA0OTQuOTg5IDQyNy4xNjYgNDc4LjA1NUM0NzUuMTE1IDQzMi40NDQgNTA1LjA1OCAzNjcuODY2IDUwNS4wNTggMjk2LjMwNUM1MDUuMDU4IDE1OC41ODMgMzk0LjI2OSA0Ni44Mjg2IDI1Ny4zNjIgNDYuMDM3WiIgZmlsbD0iIzZBQzYzRiIvPgo8Y2lyY2xlIGN4PSIzODAuNjE4IiBjeT0iMTQ0LjUyNSIgcj0iMTI0LjYxOCIgZmlsbD0iI0RBMUUyOCIvPgo8cGF0aCBkPSJNMzQzLjg4MSAyMDUuNjU2QzM0Mi41MDkgMjA1LjY1NiAzNDEuMTkzIDIwNS4xMTQgMzQwLjIyMyAyMDQuMTQ5QzMzOS4yNTIgMjAzLjE4NSAzMzguNzA3IDIwMS44NzYgMzM4LjcwNyAyMDAuNTEyVjg3LjMzMThDMzM4LjcwNyA4Ni40Mzc4IDMzOC45NDEgODUuNTU5MiAzMzkuMzg3IDg0Ljc4MjZDMzM5LjgzMiA4NC4wMDYgMzQwLjQ3NCA4My4zNTgyIDM0MS4yNDggODIuOTAzMkMzNDIuMDIyIDgyLjQ0ODEgMzQyLjkwMiA4Mi4yMDE1IDM0My44MDEgODIuMTg3NUMzNDQuNyA4Mi4xNzM2IDM0NS41ODcgODIuMzkyOCAzNDYuMzc1IDgyLjgyMzdMNDQ5Ljg2MyAxMzkuNDE0QzQ1MC42NzUgMTM5Ljg1NyA0NTEuMzUyIDE0MC41MSA0NTEuODI0IDE0MS4zMDNDNDUyLjI5NSAxNDIuMDk2IDQ1Mi41NDQgMTQzIDQ1Mi41NDQgMTQzLjkyMUM0NTIuNTQ0IDE0NC44NDMgNDUyLjI5NSAxNDUuNzQ3IDQ1MS44MjQgMTQ2LjU0QzQ1MS4zNTIgMTQ3LjMzMyA0NTAuNjc1IDE0Ny45ODUgNDQ5Ljg2MyAxNDguNDI5TDM0Ni4zNzUgMjA1LjAxOUMzNDUuNjExIDIwNS40MzcgMzQ0Ljc1MyAyMDUuNjU2IDM0My44ODEgMjA1LjY1NloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="
  }
}