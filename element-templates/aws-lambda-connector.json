{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "AWS Lambda Connector",
  "id": "io.camunda.connectors.AWSLAMBDA.v1",
  "description": "Invoke a function",
  "documentationRef": "https://docs.camunda.io/docs/next/components/connectors/out-of-the-box-connectors/aws-lambda/",
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "appliesTo": [
    "bpmn:Task"
  ],
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "authentication",
      "label": "Authentication"
    },
    {
      "id": "operation",
      "label": "Select Operation"
    },
    {
      "id": "operationDetails",
      "label": "Operation Details"
    },
    {
      "id": "output",
      "label": "Output Mapping"
    },
    {
      "id": "errors",
      "label": "Error Handling"
    }
  ],
  "properties": [
    {
      "type": "Hidden",
      "value": "io.camunda:aws-lambda:1",
      "binding": {
        "type": "zeebe:taskDefinition:type"
      }
    },
    {
      "label": "Access Key",
      "description": "Provide an access key of a user with permissions to invoke specified AWS Lambda Function",
      "group": "authentication",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "authentication.accessKey"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Secret Key",
      "description": "Provide a secret key of a user with permissions to invoke specified AWS Lambda Function",
      "group": "authentication",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "authentication.secretKey"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Region",
      "description": "Specify the AWS region",
      "group": "authentication",
      "type": "String",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "awsFunction.region"
      },
      "constraints": {
        "notEmpty": true,
        "maxLength": 255
      }
    },
    {
      "id": "operationType",
      "group": "operation",
      "type": "Dropdown",
      "value": "sync",
      "choices": [
        {
          "name": "Invoke function (sync)",
          "value": "sync"
        }
      ],
      "binding": {
        "type": "zeebe:input",
        "name": "awsFunction.operationType",
        "key": "awsFunction.operationType"
      }
    },
    {
      "label": "Function name",
      "description": "Enter a name, ARN or alias of your function",
      "group": "operationDetails",
      "type": "String",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "awsFunction.functionName"
      },
      "constraints": {
        "notEmpty": true,
        "maxLength": 255
      },
      "condition": {
        "property": "operationType",
        "equals": "sync"
      }
    },
    {
      "label": "Payload",
      "description": "Provide payload for your function as JSON",
      "group": "operationDetails",
      "type": "Text",
      "feel": "required",
      "binding": {
        "type": "zeebe:input",
        "name": "awsFunction.payload"
      },
      "condition": {
        "property": "operationType",
        "equals": "sync"
      }
    },
    {
      "label": "Result Variable",
      "description": "Enter name of variable to store the response in",
      "group": "output",
      "type": "String",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultVariable"
      }
    },
    {
      "label": "Result Expression",
      "description": "Expression to map the response into process variables",
      "group": "output",
      "type": "Text",
      "feel": "required",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultExpression"
      }
    },
    {
      "label": "Error Expression",
      "description": "Expression to handle errors. Details in the <a href=\"https://docs.camunda.io/docs/components/connectors/use-connectors/\" target=\"_blank\">documentation</a>.",
      "group": "errors",
      "type": "Text",
      "feel": "required",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "errorExpression"
      }
    }
  ],
  "icon": {
    "contents": "data:image/svg+xml;utf8,%3Csvg width='18' height='18' viewBox='0 0 48 48' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3EIcon-Resource/Compute/Res_Amazon-Lambda_Lambda-Function_48_Light%3C/title%3E%3Cg id='Icon-Resource/Compute/Res_Amazon-Lambda_Lambda-Function_48' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cpath d='M24,44 C12.972,44 4,35.028 4,24 C4,12.972 12.972,4 24,4 C35.028,4 44,12.972 44,24 C44,35.028 35.028,44 24,44 L24,44 Z M24,2 C11.869,2 2,11.869 2,24 C2,36.131 11.869,46 24,46 C36.131,46 46,36.131 46,24 C46,11.869 36.131,2 24,2 L24,2 Z M17.231,35.25 L11.876,35.25 L18.221,21.959 L20.902,27.492 L17.231,35.25 Z M19.114,19.215 C18.946,18.87 18.597,18.651 18.214,18.651 L18.211,18.651 C17.826,18.652 17.477,18.874 17.312,19.221 L9.389,35.819 C9.24,36.129 9.262,36.493 9.445,36.783 C9.628,37.074 9.947,37.25 10.291,37.25 L17.864,37.25 C18.251,37.25 18.603,37.027 18.769,36.678 L22.915,27.915 C23.044,27.642 23.043,27.323 22.911,27.051 L19.114,19.215 Z M36.125,35.25 L30.673,35.25 L20.761,13.953 C20.597,13.601 20.243,13.375 19.854,13.375 L16.251,13.375 L16.255,9.25 L23.475,9.25 L33.339,30.545 C33.503,30.898 33.856,31.125 34.246,31.125 L36.125,31.125 L36.125,35.25 Z M37.125,29.125 L34.885,29.125 L25.021,7.83 C24.856,7.477 24.503,7.25 24.113,7.25 L15.256,7.25 C14.704,7.25 14.257,7.697 14.256,8.249 L14.25,14.374 C14.25,14.64 14.355,14.894 14.543,15.082 C14.73,15.27 14.984,15.375 15.25,15.375 L19.217,15.375 L29.129,36.672 C29.293,37.024 29.646,37.25 30.035,37.25 L37.125,37.25 C37.678,37.25 38.125,36.803 38.125,36.25 L38.125,30.125 C38.125,29.572 37.678,29.125 37.125,29.125 L37.125,29.125 Z' id='Amazon-Lambda-Lambda-Function_Resource-Icon_light-bg' fill='%23D45B07'%3E%3C/path%3E%3C/g%3E%3C/svg%3E"
  }
}
